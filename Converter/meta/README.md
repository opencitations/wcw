# WARNING
This is actually a copy of the `opencitations/meta` Github repository as of May, 2021. For an up-to-date version of this project, please [take a look here](https://github.com/opencitations/meta).

# OpenCitations Meta Software

OpenCitations Meta will contain bibliographic metadata associated with the documents involved in the citations stored in the [OpenCitations](https://opencitations.net/) infrastructure. The OpenCitations Meta Software performs two main actions, a data curation of the CSV files that are provided and the generation of new RDF files compliant with the [OpenCitations Data Model](http://opencitations.net/model).

An example of a raw CSV input file can be found in ["example.csv"](https://github.com/opencitations/meta/blob/master/example.csv).

The software is launched through the ["run_process.py"](https://github.com/opencitations/meta/blob/master/run_process.py) file via the prompt command:
```console
    python -m meta.run_process -c <PATH> -v <PATH> -i <PATH> -a <PATH> -s <PATH>
```
Where:
- -c : directory where raw CSV files are stored.
- -v : directory where cleaned CSVs will be stored.
- -i : directory where cleaned indices will be stored (indices are products of CSV cleaning step, necessary for RDFs creation).
- -a : path of txt file containing processed CSV list.
- -s : Data source URL, not mandatory.

So far, preprocessing functions dedicated to the management of data coming from [Crossref](https://www.crossref.org/) have also been implemented. As preprocessing these functions must be performed before running "process.py". In particular this pre-processing is dedicated to the bibliographical metadata of the publications involved in the citations stored in [COCI](http://opencitations.net/index/coci), the OpenCitations Index of Crossref open DOI-to-DOI citations.

The preliminary step, ["index\_orcid\_doi.py"](https://github.com/opencitations/meta/blob/master/orcid/index_orcid_doi.py), inside ["orcid"](https://github.com/opencitations/meta/blob/master/orcid) package, generates an index between the author's ORCID and publication's in CSV format using Orcid Summaries Dump (e.g. [ORCID_2019_summaries](https://orcid.figshare.com/articles/ORCID_Public_Data_File_2019/9988322)):
```console
    python -m meta.orcid.index_orcid_doi -c <PATH> -s <PATH>
```
Where:
- -c output CSV file path, that is, the ORCID-DOI index.
- -s orcid summaries dump path, subfolder will be considered too.

Pre-prochessing function generates raw CSV files using JSON files from Crosseref data dump (e.g. [Crossref Works Dump - August 2019](https://figshare.com/articles/Crossref_Works_Dump_-_August_2019/9751865)), enriching them with ORCID IDs from ORCID-DOI Index generated in previous step.
This function is launched through the ["run_preprocess.py"](https://github.com/opencitations/meta/blob/master/run_preprocess.py) file via the prompt command:
```console
    python -m meta.run_preprocess -c <PATH> -o <PATH> -v <PATH> -w <PATH>
```
Where:
- -c : Crossref JSON files directory (input files).
- -o : ORCID-DOI index filepath, generated by ["index\_orcid\_doi.py"](https://github.com/opencitations/meta/blob/master/orcid/index_orcid_doi.py).
- -v : directory where CSVs will be stored.
- -w : path of a CSV file containing what DOI to process, not mandatory.